# fastlane/Fastfile

default_platform(:ios)

platform :ios do
  ############################################################
  # ‚úÖ  BETA lane (uploads your newly built .ipa to TestFlight)
  ############################################################
  desc "Push a new beta build to TestFlight"
  lane :beta do
    # 1) Grab the path to the .ipa that our GitHub Action built:
    ipa = ENV["FASTLANE_IPA_PATH"]
    UI.message("üîç  IPA path = #{ipa}")

    # 2) Call `deliver` to upload the .ipa to TestFlight/App Store Connect.
    #    We tell `deliver` to skip all metadata/screenshots since we
    #    only want to push the IPA itself. Adjust `app_identifier` to
    #    match your bundle ID.
    deliver(
      ipa: ipa,
      app_identifier: "com.companyname.alanjayapp",  # ‚Üê replace with your actual bundle ID
      skip_metadata:    true,    # don't upload metadata (Info.plist, descriptions, etc.)
      skip_screenshots: true,    # don't upload screenshots
      submit_for_review: false   # set to true if you want auto‚Äêsubmission to review
    )
  end
end
